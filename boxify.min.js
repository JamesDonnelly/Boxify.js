$.fn.extend({boxify:function(i){var j=$(this),e=j.children("figure"),i=i||{},k=i.background||"#fff",a=i["border-color"]||"#bbb",m=i.color||"#000",g=i.margin&&+i.margin.replace(/px$/,"")||6,l=i.padding&&+i.padding.replace(/px$/,"")||10,f=i.width&&+i.width.replace(/px$/,"")||220,c=j.innerWidth(),b=(c%(f+g)),h=(c-b)/(f+g),d=[];j.css({margin:g/2+"px "+b/2+"px",position:"relative"});e.each(function(n,o){var p=$(o);p.css({background:p.data("background")||k,color:p.data("color")||m,borderWidth:1,borderStyle:"solid",borderColor:p.data("border-color")||a,boxSizing:"border-box",margin:g/2,padding:l,position:"absolute",top:n>=h?d[n-h]:0,left:(f+g)*Math.round(n%h),width:f});p.find("img").width(f-(l*2)-2);d.push(p.outerHeight()+g+p.position().top)})}});